function fancy-ctrl-z {
  if [[ $#BUFFER -eq 0 ]]; then
    kill -9 %+
    zle redisplay
  else
    zle push-input
  fi
}

fancy-ctrl-z "$@"
