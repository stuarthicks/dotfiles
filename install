#!/bin/bash
set -eu

if [ ! -d "$HOME" ] ; then echo "Not found: $HOME" ; exit 1 ; fi
ETC="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

link () {
  FROM="$ETC/$1"
  if [ ! -e "$FROM" ] ; then echo "Not found: $FROM" ; exit 1 ; fi
  TO="$HOME/$1"
  if [ ! -e "$TO" ] ; then
    echo "Linking: $TO --> $FROM"
    pushd "$(dirname "$TO")" > /dev/null
    ln -s ".$1" "$FROM"
    popd > /dev/null
  else
    echo "Exists: $TO"
  fi
}

link "mailcap"
link "mintty_profile"
link "tmux.conf"
link "vimrc"
link "Xresources"
link "zprofile"
link "zshrc"

link "pentadactylrc"
ln -s $HOME/.pentadactyl pentadactyl